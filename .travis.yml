language: python
python:
  - 2.7
  - 3.5
  - 3.6
matrix:
  - python: 3.7
    dist: xenial
install:
  - easy_install vsc-install
  # installing coloredlogs and future is only needed for the import tests
  # this can be removed if only "python setup.py test" is used (since that auto-installs required dependencies)
  - if [ "$(echo $TRAVIS_PYTHON_VERSION | cut -f1 -d.)" == '3' ]; then pip install coloredlogs future; fi
script:
  # 'hpcugent' is a mandatory remote for setup.py to work (because of vsc-install)
  - git remote add hpcugent https://github.com/hpcugent/vsc-base.git
  # only run part of the tests with Python 3 for now (until whole code base is Py3 compatible)
  - if [ "$(echo $TRAVIS_PYTHON_VERSION | cut -f1 -d.)" == '3' ]; then
        set -e;
        export PYTHONPATH="$PWD/lib:$PYTHONPATH";
        python -c "import vsc.utils.fancylogger";
        python -c "import test.fancylogger";
    else
        python setup.py test;
    fi;
